<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>OpenClaw Manager</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700;900&family=JetBrains+Mono:wght@400;500;600&display=swap');
*{box-sizing:border-box;margin:0;padding:0}
:root{--bg:#0d1117;--surface:#161b22;--s2:#1c2128;--s3:#21262d;--border:#30363d;--b2:#21262d;--accent:#f78166;--a2:#ff7b54;--blue:#58a6ff;--green:#3fb950;--yellow:#d29922;--purple:#bc8cff;--red:#f85149;--orange:#ffa657;--cyan:#39d353;--text:#e6edf3;--t2:#8b949e;--t3:#6e7681;--sw:220px}
body{font-family:'Cairo',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;overflow-x:hidden;font-size:14px}
/* SIDEBAR */
.sidebar{position:fixed;right:0;top:0;width:var(--sw);height:100vh;background:var(--surface);border-left:1px solid var(--border);display:flex;flex-direction:column;z-index:100;overflow-y:auto}
.logo{padding:16px 14px 12px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:10px}
.logo-icon{font-size:28px}
.logo h1{font-size:15px;font-weight:700}.logo p{font-size:11px;color:var(--t3);font-family:'JetBrains Mono',monospace}
.ns{padding:8px 8px 2px}.ns-lbl{font-size:10px;font-weight:700;color:var(--t3);text-transform:uppercase;letter-spacing:.8px;padding:0 8px;margin-bottom:4px}
.ni{display:flex;align-items:center;gap:8px;padding:7px 10px;border-radius:6px;cursor:pointer;transition:all .15s;color:var(--t2);font-size:13px;font-weight:500;border:none;background:none;width:100%;text-align:right}
.ni:hover{background:var(--s2);color:var(--text)}.ni.on{background:rgba(247,129,102,.12);color:var(--accent)}
.ni-icon{font-size:15px;min-width:18px;text-align:center}
.sf{margin-top:auto;padding:12px;border-top:1px solid var(--border)}
.svc{display:flex;align-items:center;gap:6px;font-size:12px;color:var(--t2)}
.dot{width:7px;height:7px;border-radius:50%;flex-shrink:0}
.dot.g{background:var(--green);box-shadow:0 0 5px var(--green);animation:bl 2s infinite}
@keyframes bl{0%,100%{opacity:1}50%{opacity:.4}}
/* MAIN */
.main{margin-right:var(--sw);min-height:100vh}
.tb{padding:14px 24px;border-bottom:1px solid var(--border);background:rgba(22,27,34,.9);backdrop-filter:blur(8px);position:sticky;top:0;z-index:50;display:flex;align-items:center;justify-content:space-between}
.tb-l h2{font-size:17px;font-weight:700}.tb-l p{font-size:12px;color:var(--t2);margin-top:1px}
.content{padding:24px}
.page{display:none}.page.on{display:block}
/* CARDS */
.card{background:var(--surface);border:1px solid var(--border);border-radius:8px;margin-bottom:16px;overflow:hidden}
.ch{padding:12px 16px;border-bottom:1px solid var(--b2);display:flex;align-items:center;justify-content:space-between;background:rgba(255,255,255,.015)}
.ch h3{font-size:14px;font-weight:700;display:flex;align-items:center;gap:6px}
.cb{padding:16px}
/* GRID */
.g4{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
.g3{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
.g2{display:grid;grid-template-columns:1fr 1fr;gap:14px}
@media(max-width:900px){.g4{grid-template-columns:repeat(2,1fr)}.g3{grid-template-columns:1fr 1fr}}
/* STAT */
.stat{background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:16px}
.st{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:8px}
.si{font-size:20px}
.sv{font-size:22px;font-weight:800;font-family:'JetBrains Mono',monospace;line-height:1.1;margin-bottom:3px}
.sl{font-size:12px;color:var(--t2)}
/* BADGES */
.tag{display:inline-flex;align-items:center;padding:2px 7px;border-radius:10px;font-size:11px;font-weight:600}
.bg{background:rgba(63,185,80,.12);color:var(--green);border:1px solid rgba(63,185,80,.25)}
.br{background:rgba(248,81,73,.12);color:var(--red);border:1px solid rgba(248,81,73,.25)}
.bb{background:rgba(88,166,255,.12);color:var(--blue);border:1px solid rgba(88,166,255,.25)}
.by{background:rgba(210,153,34,.12);color:var(--yellow);border:1px solid rgba(210,153,34,.25)}
.bp{background:rgba(188,140,255,.12);color:var(--purple);border:1px solid rgba(188,140,255,.25)}
.bo{background:rgba(255,166,87,.12);color:var(--orange);border:1px solid rgba(255,166,87,.25)}
/* BUTTONS */
.btn{display:inline-flex;align-items:center;gap:5px;padding:7px 14px;border-radius:6px;font-size:13px;font-weight:600;cursor:pointer;border:none;transition:all .15s;font-family:'Cairo',sans-serif}
.btn:disabled{opacity:.5;cursor:default}
.btn-p{background:var(--accent);color:#0d1117}.btn-p:hover{background:var(--a2)}
.btn-s{background:var(--s2);color:var(--text);border:1px solid var(--border)}.btn-s:hover{background:var(--s3)}
.btn-g{background:rgba(63,185,80,.15);color:var(--green);border:1px solid rgba(63,185,80,.3)}.btn-g:hover{background:rgba(63,185,80,.25)}
.btn-r{background:rgba(248,81,73,.1);color:var(--red);border:1px solid rgba(248,81,73,.25)}.btn-r:hover{background:rgba(248,81,73,.2)}
.btn-b{background:rgba(88,166,255,.12);color:var(--blue);border:1px solid rgba(88,166,255,.25)}.btn-b:hover{background:rgba(88,166,255,.2)}
.sm{padding:4px 10px;font-size:12px}.xs{padding:3px 8px;font-size:11px}
.bti{padding:6px;border-radius:6px;background:none;border:1px solid transparent;cursor:pointer;color:var(--t2);transition:all .15s;font-size:14px}
.bti:hover{background:var(--s2);border-color:var(--border);color:var(--text)}
/* FORM */
.fg{margin-bottom:14px}.fg label{display:block;font-size:11px;font-weight:700;color:var(--t2);margin-bottom:5px;text-transform:uppercase;letter-spacing:.5px}
input,select,textarea{width:100%;background:var(--bg);border:1px solid var(--border);border-radius:6px;padding:8px 10px;color:var(--text);font-size:13px;font-family:'Cairo',sans-serif;outline:none;transition:border-color .15s}
input:focus,select:focus,textarea:focus{border-color:var(--accent);box-shadow:0 0 0 3px rgba(247,129,102,.1)}
input::placeholder,textarea::placeholder{color:var(--t3)}
select option{background:var(--s2)}
textarea{resize:vertical;min-height:80px;line-height:1.5}
.fh{font-size:11px;color:var(--t3);margin-top:4px}
/* TOGGLE */
.tr{display:flex;align-items:center;justify-content:space-between;padding:10px 0}
.ti-t{font-size:14px;font-weight:600}.ti-d{font-size:12px;color:var(--t2);margin-top:2px}
.sw{position:relative;width:40px;height:22px;cursor:pointer;flex-shrink:0}
.sw input{opacity:0;width:0;height:0}
.sw-t{position:absolute;inset:0;background:var(--border);border-radius:22px;transition:.2s}
.sw-k{position:absolute;width:16px;height:16px;background:#fff;border-radius:50%;top:3px;left:3px;transition:.2s}
.sw input:checked~.sw-t{background:var(--green)}
.sw input:checked~.sw-k{transform:translateX(18px)}
/* TABLE */
.tbl{width:100%;border-collapse:collapse}
.tbl th{text-align:right;padding:8px 12px;font-size:11px;font-weight:700;color:var(--t3);text-transform:uppercase;letter-spacing:.5px;border-bottom:1px solid var(--border);background:var(--s2)}
.tbl td{padding:10px 12px;font-size:13px;border-bottom:1px solid var(--b2);vertical-align:middle}
.tbl tr:hover td{background:rgba(255,255,255,.02)}
.tbl tr:last-child td{border-bottom:none}
/* MODEL ITEM */
.mi{background:var(--s2);border:1px solid var(--b2);border-radius:8px;padding:14px;margin-bottom:10px;display:flex;align-items:center;gap:12px;transition:all .15s}
.mi:hover{border-color:var(--border)}
.mi.ac{border-color:rgba(63,185,80,.4);background:rgba(63,185,80,.04)}
.ma{width:40px;height:40px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:22px;flex-shrink:0;background:var(--s3)}
.mn{flex:1;min-width:0}
.mnt{font-size:14px;font-weight:700;display:flex;align-items:center;gap:6px;flex-wrap:wrap}
.mm{font-size:11px;color:var(--t3);font-family:'JetBrains Mono',monospace;margin-top:3px}
.mact{display:flex;gap:6px;flex-shrink:0}
/* MODAL */
.ov{position:fixed;inset:0;background:rgba(0,0,0,.65);backdrop-filter:blur(3px);z-index:200;opacity:0;pointer-events:none;transition:opacity .2s;display:flex;align-items:center;justify-content:center}
.ov.op{opacity:1;pointer-events:all}
.modal{background:var(--surface);border:1px solid var(--border);border-radius:10px;width:92%;max-width:500px;max-height:88vh;overflow-y:auto;transform:translateY(16px);transition:transform .2s}
.ov.op .modal{transform:translateY(0)}
.mh{padding:16px 18px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
.mh h3{font-size:15px;font-weight:700}
.mb{padding:18px}.mf{padding:12px 18px;border-top:1px solid var(--border);display:flex;justify-content:flex-end;gap:8px}
.xb{background:none;border:none;color:var(--t3);font-size:18px;cursor:pointer;line-height:1;padding:2px}.xb:hover{color:var(--text)}
/* TOAST */
#toasts{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);z-index:999;display:flex;flex-direction:column;gap:7px;align-items:center;pointer-events:none}
.toast{background:var(--s2);border:1px solid var(--border);border-radius:8px;padding:9px 18px;font-size:13px;font-weight:600;display:flex;align-items:center;gap:7px;box-shadow:0 8px 24px rgba(0,0,0,.4);animation:tin .2s ease;pointer-events:none}
.toast.ok{border-color:rgba(63,185,80,.4);color:var(--green)}
.toast.err{border-color:rgba(248,81,73,.4);color:var(--red)}
.toast.inf{border-color:rgba(88,166,255,.3);color:var(--blue)}
@keyframes tin{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
/* MISC */
hr{border:none;border-top:1px solid var(--b2);margin:14px 0}
.wh{background:var(--bg);border:1px solid var(--border);border-radius:6px;padding:10px 12px;font-family:'JetBrains Mono',monospace;font-size:12px;color:var(--blue);word-break:break-all;display:flex;align-items:center;gap:8px;justify-content:space-between}
.empty{text-align:center;padding:50px 20px;color:var(--t2)}
.empty .ei{font-size:42px;margin-bottom:12px}
.empty h4{font-size:15px;font-weight:700;margin-bottom:6px;color:var(--text)}
.step{display:flex;gap:12px;align-items:flex-start}
.stn{width:26px;height:26px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;flex-shrink:0;background:var(--accent);color:#0d1117}
.stn.done{background:var(--green)}
.pc{display:flex;align-items:center;gap:10px;padding:10px 14px;background:var(--s2);border:1px solid var(--b2);border-radius:8px}
.pci{font-size:20px}.pcn{flex:1}.pct{font-size:13px;font-weight:700}.pcv{font-size:11px;color:var(--t3);font-family:'JetBrains Mono',monospace;margin-top:2px}
.log-a{background:var(--bg);border:1px solid var(--border);border-radius:6px;padding:12px;font-family:'JetBrains Mono',monospace;font-size:12px;line-height:1.7;max-height:420px;overflow-y:auto}
.ll{display:flex;gap:10px}
.lt{color:var(--t3);flex-shrink:0}
.lv{flex-shrink:0;font-weight:600;min-width:50px}
.lv.INFO{color:var(--blue)}.lv.WARN{color:var(--yellow)}.lv.ERROR{color:var(--red)}.lv.DEBUG{color:var(--t3)}
.lm{color:var(--t2)}
.ch-card{background:var(--s2);border:1px solid var(--b2);border-radius:8px;padding:16px;display:flex;align-items:flex-start;gap:14px}
.ch-ic{font-size:28px;flex-shrink:0;margin-top:2px}.ch-n{font-size:15px;font-weight:700;margin-bottom:4px}.ch-d{font-size:12px;color:var(--t2);margin-bottom:12px}
.agent-item{background:var(--s2);border:1px solid var(--b2);border-radius:8px;padding:14px;margin-bottom:10px}
.aih{display:flex;align-items:center;gap:10px;margin-bottom:8px}
.aia{width:36px;height:36px;border-radius:8px;background:linear-gradient(135deg,var(--purple),var(--blue));display:flex;align-items:center;justify-content:center;font-size:18px;flex-shrink:0}
.aim{flex:1}.ain{font-size:14px;font-weight:700}.ais{font-size:11px;color:var(--t3)}
.mcp-i{background:var(--s2);border:1px solid var(--b2);border-radius:8px;padding:12px;margin-bottom:8px;display:flex;align-items:center;gap:10px}
.mcp-d{width:8px;height:8px;border-radius:50%;flex-shrink:0}
.mcp-n{flex:1}.mcp-t{font-size:13px;font-weight:700}.mcp-c{font-size:11px;color:var(--t3);font-family:'JetBrains Mono',monospace;margin-top:2px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:260px}
.sk-i{background:var(--s2);border:1px solid var(--b2);border-radius:8px;padding:12px;display:flex;align-items:center;gap:10px}
.sk-ic{font-size:22px;width:38px;height:38px;border-radius:7px;background:var(--s3);display:flex;align-items:center;justify-content:center;flex-shrink:0}
.sk-n{font-size:13px;font-weight:700}.sk-d{font-size:11px;color:var(--t2);margin-top:2px}
::-webkit-scrollbar{width:5px;height:5px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}
</style>
</head>
<body>

<nav class="sidebar">
  <div class="logo">
    <div class="logo-icon">ğŸ¦</div>
    <div><h1>OpenClaw</h1><p>Manager v2.0</p></div>
  </div>
  <div class="ns"><div class="ns-lbl">Ø¹Ø§Ù…</div>
    <button class="ni on" onclick="nav('dashboard',this)"><span class="ni-icon">ğŸ“Š</span>Dashboard</button>
    <button class="ni" onclick="nav('ai',this)"><span class="ni-icon">ğŸ¤–</span>AI Config</button>
    <button class="ni" onclick="nav('channels',this)"><span class="ni-icon">ğŸ“±</span>Channels</button>
  </div>
  <div class="ns"><div class="ns-lbl">Ù…ØªÙ‚Ø¯Ù…</div>
    <button class="ni" onclick="nav('agents',this)"><span class="ni-icon">ğŸ§ </span>Agents</button>
    <button class="ni" onclick="nav('mcp',this)"><span class="ni-icon">ğŸ”Œ</span>MCP</button>
    <button class="ni" onclick="nav('skills',this)"><span class="ni-icon">âš¡</span>Skills</button>
  </div>
  <div class="ns"><div class="ns-lbl">Ù†Ø¸Ø§Ù…</div>
    <button class="ni" onclick="nav('logs',this)"><span class="ni-icon">ğŸ“‹</span>Logs</button>
    <button class="ni" onclick="nav('testing',this)"><span class="ni-icon">ğŸ§ª</span>Testing</button>
    <button class="ni" onclick="nav('settings',this)"><span class="ni-icon">âš™ï¸</span>Settings</button>
  </div>
  <div class="ns">
    <button class="ni" onclick="window.open('/','_blank')"><span class="ni-icon">ğŸ’¬</span>ÙØªØ­ Ø§Ù„Ø´Ø§Øª</button>
  </div>
  <div class="sf"><div class="svc"><div class="dot g"></div><span id="svctxt">ÙŠØ¹Ù…Ù„</span></div></div>
</nav>

<div class="main">

<!-- DASHBOARD -->
<div class="page on" id="page-dashboard">
  <div class="tb"><div class="tb-l"><h2>ğŸ“Š Dashboard</h2><p>Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø¸Ø§Ù…</p></div>
    <button class="btn btn-s sm" onclick="loadAll()">ğŸ”„ ØªØ­Ø¯ÙŠØ«</button></div>
  <div class="content">
    <div class="g4" style="margin-bottom:16px">
      <div class="stat"><div class="st"><span class="si">ğŸ¤–</span><span class="tag bg" id="d-svc-tag">ÙŠØ¹Ù…Ù„</span></div><div class="sv" id="d-mname">-</div><div class="sl">Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù†Ø´Ø·</div></div>
      <div class="stat"><div class="st"><span class="si">ğŸ“¦</span><span class="tag bb" id="d-mc-tag">0</span></div><div class="sv" id="d-mc">0</div><div class="sl">Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ù…Ø¶Ø§ÙØ©</div></div>
      <div class="stat"><div class="st"><span class="si">âœˆï¸</span><span class="tag" id="d-tg-tag">-</span></div><div class="sv" id="d-tg">-</div><div class="sl">Telegram</div></div>
      <div class="stat"><div class="st"><span class="si">âš¡</span><span class="tag bp">Ø£Ø¯ÙˆØ§Øª</span></div><div class="sv" id="d-tools">0/2</div><div class="sl">Ø£Ø¯ÙˆØ§Øª Ù…ÙØ¹Ù„Ø©</div></div>
    </div>
    <div class="g2">
      <div class="card"><div class="ch"><h3>ğŸ¯ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù†Ø´Ø·</h3><button class="btn btn-s sm" onclick="nav('ai',null)">ØªØºÙŠÙŠØ±</button></div>
        <div class="cb" id="d-active-model"><div style="color:var(--t3)">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div></div></div>
      <div class="card"><div class="ch"><h3>âš¡ Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø³Ø±ÙŠØ¹Ø©</h3></div>
        <div class="cb" style="display:flex;flex-direction:column;gap:8px">
          <button class="btn btn-s" style="width:100%;justify-content:flex-start" onclick="openAddModel()">â• Ø¥Ø¶Ø§ÙØ© Ù†Ù…ÙˆØ°Ø¬ AI</button>
          <button class="btn btn-s" style="width:100%;justify-content:flex-start" onclick="nav('channels',null)">âœˆï¸ Ø¥Ø¹Ø¯Ø§Ø¯ Telegram</button>
          <button class="btn btn-s" style="width:100%;justify-content:flex-start" onclick="nav('settings',null)">ğŸ“ ØªØ¹Ø¯ÙŠÙ„ System Prompt</button>
          <button class="btn btn-b" style="width:100%;justify-content:flex-start" onclick="window.open('/','_blank')">ğŸ’¬ ÙØªØ­ Ø§Ù„Ø´Ø§Øª</button>
        </div></div>
    </div>
    <div class="card"><div class="ch"><h3>ğŸ–¥ï¸ Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…</h3></div>
      <div class="cb"><div class="g3">
        <div class="pc"><div class="pci">ğŸŒ</div><div class="pcn"><div class="pct">Web Server</div><div class="pcv">Port 7860</div></div><span class="tag bg">Active</span></div>
        <div class="pc"><div class="pci">ğŸ”—</div><div class="pcn"><div class="pct">Webhook</div><div class="pcv" id="sys-wh">...</div></div><span class="tag bb" id="sys-wh-tag">-</span></div>
        <div class="pc"><div class="pci">ğŸ’¾</div><div class="pcn"><div class="pct">Config Store</div><div class="pcv">/app/data/config.json</div></div><span class="tag bg">OK</span></div>
      </div></div></div>
  </div>
</div>

<!-- AI CONFIG -->
<div class="page" id="page-ai">
  <div class="tb"><div class="tb-l"><h2>ğŸ¤– AI Configuration</h2><p>Ø¥Ø¯Ø§Ø±Ø© Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</p></div>
    <button class="btn btn-p" onclick="openAddModel()">â• Ø¥Ø¶Ø§ÙØ© Ù†Ù…ÙˆØ°Ø¬</button></div>
  <div class="content">
    <div class="card"><div class="ch"><h3>ğŸ—‚ï¸ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ù…Ø¶Ø§ÙØ©</h3><span class="tag bb" id="mc-tag">0 Ù†Ù…ÙˆØ°Ø¬</span></div>
      <div class="cb" id="models-list"><div class="empty"><div class="ei">ğŸ¤–</div><h4>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†Ù…Ø§Ø°Ø¬</h4><p>Ø£Ø¶Ù Ù†Ù…ÙˆØ°Ø¬Ø§Ù‹ Ù„Ù„Ø¨Ø¯Ø¡</p><button class="btn btn-p" onclick="openAddModel()">â• Ø¥Ø¶Ø§ÙØ©</button></div></div></div>
    <div class="card"><div class="ch"><h3>ğŸŒ Ø§Ù„Ù…Ø²ÙˆØ¯ÙˆÙ† Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…ÙˆÙ† (14+)</h3></div>
      <div class="cb"><div class="g4">
        <div class="pc" style="flex-direction:column;align-items:flex-start;gap:3px;cursor:pointer" onclick="quickAdd('groq')"><span style="font-size:18px">âš¡</span><span style="font-weight:700;font-size:13px">Groq</span><span style="font-size:11px;color:var(--green)">Ù…Ø¬Ø§Ù†ÙŠ ÙˆØ³Ø±ÙŠØ¹</span></div>
        <div class="pc" style="flex-direction:column;align-items:flex-start;gap:3px;cursor:pointer" onclick="quickAdd('openai')"><span style="font-size:18px">ğŸŸ¢</span><span style="font-weight:700;font-size:13px">OpenAI</span><span style="font-size:11px;color:var(--t2)">GPT-4o</span></div>
        <div class="pc" style="flex-direction:column;align-items:flex-start;gap:3px;cursor:pointer" onclick="quickAdd('anthropic')"><span style="font-size:18px">ğŸŸ </span><span style="font-weight:700;font-size:13px">Anthropic</span><span style="font-size:11px;color:var(--t2)">Claude 3.5</span></div>
        <div class="pc" style="flex-direction:column;align-items:flex-start;gap:3px;cursor:pointer" onclick="quickAdd('google')"><span style="font-size:18px">ğŸ”µ</span><span style="font-weight:700;font-size:13px">Google</span><span style="font-size:11px;color:var(--t2)">Gemini 1.5</span></div>
        <div class="pc" style="flex-direction:column;align-items:flex-start;gap:3px;cursor:pointer" onclick="quickAdd('deepseek')"><span style="font-size:18px">ğŸ‹</span><span style="font-weight:700;font-size:13px">DeepSeek</span><span style="font-size:11px;color:var(--t2)">DeepSeek-V3</span></div>
        <div class="pc" style="flex-direction:column;align-items:flex-start;gap:3px;cursor:pointer" onclick="quickAdd('mistral')"><span style="font-size:18px">ğŸŒŠ</span><span style="font-weight:700;font-size:13px">Mistral</span><span style="font-size:11px;color:var(--t2)">Mistral Large</span></div>
        <div class="pc" style="flex-direction:column;align-items:flex-start;gap:3px;cursor:pointer" onclick="quickAdd('cohere')"><span style="font-size:18px">ğŸŸ¡</span><span style="font-weight:700;font-size:13px">Cohere</span><span style="font-size:11px;color:var(--t2)">Command R+</span></div>
        <div class="pc" style="flex-direction:column;align-items:flex-start;gap:3px;cursor:pointer" onclick="quickAdd('custom')"><span style="font-size:18px">ğŸ”§</span><span style="font-weight:700;font-size:13px">Custom</span><span style="font-size:11px;color:var(--t2)">OpenAI Compatible</span></div>
      </div></div></div>
  </div>
</div>

<!-- CHANNELS -->
<div class="page" id="page-channels">
  <div class="tb"><div class="tb-l"><h2>ğŸ“± Message Channels</h2><p>Ø±Ø¨Ø· Ø§Ù„Ø¨ÙˆØª Ø¨Ù…Ù†ØµØ§Øª Ø§Ù„ØªÙˆØ§ØµÙ„</p></div></div>
  <div class="content">
    <div class="card">
      <div class="ch"><h3>âœˆï¸ Telegram Bot</h3>
        <div style="display:flex;align-items:center;gap:8px"><span class="tag" id="tg-hd-tag">-</span>
          <label class="sw"><input type="checkbox" id="tg-on" onchange="saveTg()"><div class="sw-t"></div><div class="sw-k"></div></label></div></div>
      <div class="cb">
        <div class="g2">
          <div>
            <div class="fg"><label>Bot Token</label><input type="text" value="âœ… Ù…Ø®Ø²Ù† ÙÙŠ HuggingFace Secrets" disabled style="color:var(--green)"><div class="fh">Ø£Ø¶Ù TELEGRAM_BOT_TOKEN ÙÙŠ Settings â†’ Secrets</div></div>
            <div class="fg"><label>Webhook URL Ø§Ù„Ø­Ø§Ù„ÙŠ</label><div class="wh"><span id="tg-wh" style="flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap">Ø¬Ø§Ø±ÙŠ...</span><button class="btn btn-s xs" onclick="copyWh()">Ù†Ø³Ø®</button></div></div>
            <div style="display:flex;gap:8px;flex-wrap:wrap">
              <button class="btn btn-p sm" onclick="regWh()">ğŸš€ ØªØ³Ø¬ÙŠÙ„ Webhook</button>
              <button class="btn btn-s sm" onclick="chkWh()">ğŸ” ÙØ­Øµ Ø§Ù„Ø­Ø§Ù„Ø©</button>
            </div>
            <div id="tg-st" style="margin-top:10px;font-size:12px"></div>
          </div>
          <div style="display:flex;flex-direction:column;gap:14px">
            <div class="step"><div class="stn">1</div><div><div style="font-weight:700;font-size:13px">Ø£Ø¶Ù Token ÙÙŠ Secrets</div><div style="font-size:12px;color:var(--t2)">HuggingFace Space â†’ Settings â†’ Secrets â†’ TELEGRAM_BOT_TOKEN</div></div></div>
            <div class="step"><div class="stn">2</div><div><div style="font-weight:700;font-size:13px">Ø§Ø¶ØºØ· "ØªØ³Ø¬ÙŠÙ„ Webhook"</div><div style="font-size:12px;color:var(--t2)">Ø³ÙŠÙØªØ­ Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙÙŠ ØªØ§Ø¨ Ø¬Ø¯ÙŠØ¯</div></div></div>
            <div class="step"><div class="stn done">âœ“</div><div><div style="font-weight:700;font-size:13px">Ø¬Ø§Ù‡Ø²! Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©</div><div style="font-size:12px;color:var(--t2)">Ø§ÙØªØ­ Ø§Ù„Ø¨ÙˆØª ÙÙŠ Telegram ÙˆØ£Ø±Ø³Ù„ /start</div></div></div>
          </div>
        </div>
      </div>
    </div>
    <div class="g2">
      <div class="ch-card"><div class="ch-ic">ğŸ’¬</div><div><div class="ch-n">Discord</div><div class="ch-d">Ø³ÙŠØ±ÙØ±Ø§Øª Discord</div><div class="fg" style="margin-bottom:8px"><label>Bot Token</label><input type="password" placeholder="Discord Bot Token" disabled></div><span class="tag by">Ù‚Ø±ÙŠØ¨Ø§Ù‹</span></div></div>
      <div class="ch-card"><div class="ch-ic">ğŸ’¼</div><div><div class="ch-n">Slack</div><div class="ch-d">Ù…Ø³Ø§Ø­Ø§Øª Slack</div><div class="fg" style="margin-bottom:8px"><label>Bot Token</label><input type="password" placeholder="xoxb-..." disabled></div><span class="tag by">Ù‚Ø±ÙŠØ¨Ø§Ù‹</span></div></div>
      <div class="ch-card"><div class="ch-ic">ğŸ“§</div><div><div class="ch-n">WhatsApp</div><div class="ch-d">WhatsApp Business API</div><div class="fg" style="margin-bottom:8px"><label>API Key</label><input type="password" placeholder="WhatsApp API Key" disabled></div><span class="tag by">Ù‚Ø±ÙŠØ¨Ø§Ù‹</span></div></div>
      <div class="ch-card"><div class="ch-ic">ğŸ¦</div><div><div class="ch-n">Twitter / X</div><div class="ch-d">Twitter API v2</div><div class="fg" style="margin-bottom:8px"><label>Bearer Token</label><input type="password" placeholder="Bearer Token" disabled></div><span class="tag by">Ù‚Ø±ÙŠØ¨Ø§Ù‹</span></div></div>
    </div>
  </div>
</div>

<!-- AGENTS -->
<div class="page" id="page-agents">
  <div class="tb"><div class="tb-l"><h2>ğŸ§  Multi-Agent Routing</h2><p>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡ ÙˆØ§Ù„ØªÙˆØ¬ÙŠÙ‡</p></div>
    <button class="btn btn-p" onclick="toast('Ù‚Ø±ÙŠØ¨Ø§Ù‹','inf')">â• ÙˆÙƒÙŠÙ„ Ø¬Ø¯ÙŠØ¯</button></div>
  <div class="content">
    <div class="g2">
      <div class="card" style="margin-bottom:0"><div class="ch"><h3>âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø©</h3></div>
        <div class="cb">
          <div class="fg"><label>Max Spawn Depth</label><input type="number" id="a-depth" value="2" min="1" max="5"></div>
          <div class="fg"><label>Max Children Per Agent</label><input type="number" id="a-ch" value="3" min="1" max="10"></div>
          <div class="fg"><label>Max Concurrent</label><input type="number" id="a-co" value="5" min="1" max="20"></div>
          <button class="btn btn-p sm" onclick="saveAgents()">ğŸ’¾ Ø­ÙØ¸</button>
        </div></div>
      <div class="card" style="margin-bottom:0"><div class="ch"><h3>ğŸ—ºï¸ Routing Tree Example</h3></div>
        <div class="cb"><div style="font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--t2);line-height:2">
          <div style="color:var(--blue)">researchbot <span style="color:var(--t3)">(depth 0)</span></div>
          <div style="padding-right:16px;color:var(--t3)">â””â†’ <span style="color:var(--purple)">orchestrator</span> (depth 1)</div>
          <div style="padding-right:32px;color:var(--t3)">â”œâ†’ <span style="color:var(--green)">worker_1</span> (depth 2)</div>
          <div style="padding-right:32px;color:var(--t3)">â”œâ†’ <span style="color:var(--green)">worker_2</span> (depth 2)</div>
          <div style="padding-right:32px;color:var(--t3)">â””â†’ <span style="color:var(--green)">worker_3</span> (depth 2)</div>
        </div></div></div>
    </div>
    <div class="card" style="margin-top:16px"><div class="ch"><h3>ğŸ¤– Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡</h3></div>
      <div class="cb" id="agents-list">
        <div class="agent-item"><div class="aih">
          <div class="aia">ğŸ¦</div>
          <div class="aim"><div class="ain">Main Agent <span class="tag bg" style="font-size:10px">Default</span></div><div class="ais">workspace: ~/.openclaw/workspace Â· sessions: 0</div></div>
          <div style="display:flex;gap:6px"><button class="btn btn-s xs">âœï¸ ØªØ¹Ø¯ÙŠÙ„</button><button class="btn btn-s xs">ğŸ“ SOUL.md</button></div>
        </div>
        <div style="display:flex;gap:6px;flex-wrap:wrap"><span class="tag bb">Telegram: Main Bot</span><span class="tag bp">AllowAgents: all</span><span class="tag bg">Default Agent</span></div></div>
      </div></div>
  </div>
</div>

<!-- MCP -->
<div class="page" id="page-mcp">
  <div class="tb"><div class="tb-l"><h2>ğŸ”Œ MCP Management</h2><p>Model Context Protocol Servers</p></div>
    <button class="btn btn-p" onclick="openModal('modal-mcp')">â• Ø¥Ø¶Ø§ÙØ© Server</button></div>
  <div class="content">
    <div class="card"><div class="ch"><h3>ğŸ“¦ mcporter</h3></div>
      <div class="cb" style="display:flex;gap:10px;flex-wrap:wrap">
        <button class="btn btn-g sm">ğŸ“¦ ØªØ«Ø¨ÙŠØª mcporter</button>
        <button class="btn btn-r sm">ğŸ—‘ï¸ Ø¥Ø²Ø§Ù„Ø© mcporter</button>
        <button class="btn btn-s sm" onclick="toast('Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©...','inf')">ğŸ”„ Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
      </div></div>
    <div class="card"><div class="ch"><h3>ğŸ”Œ MCP Servers</h3><button class="btn btn-s sm" onclick="toast('Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙƒÙ„...','inf')">ğŸ§ª Test All</button></div>
      <div class="cb" id="mcp-list">
        <div class="mcp-i"><div class="mcp-d" style="background:var(--green)"></div><div class="mcp-n"><div class="mcp-t">filesystem</div><div class="mcp-c">npx @modelcontextprotocol/server-filesystem /home/user</div></div><div style="display:flex;gap:6px"><span class="tag bg">stdio</span><span class="tag bb">enabled</span><button class="bti">ğŸ—‘ï¸</button></div></div>
        <div class="mcp-i"><div class="mcp-d" style="background:var(--yellow)"></div><div class="mcp-n"><div class="mcp-t">brave-search</div><div class="mcp-c">npx @modelcontextprotocol/server-brave-search</div></div><div style="display:flex;gap:6px"><span class="tag bb">SSE</span><span class="tag by">disabled</span><button class="bti">ğŸ—‘ï¸</button></div></div>
        <div style="margin-top:10px"><button class="btn btn-s sm" onclick="openModal('modal-mcp')">â• Ø¥Ø¶Ø§ÙØ© Server Ø¬Ø¯ÙŠØ¯</button></div>
      </div></div>
  </div>
</div>

<!-- SKILLS -->
<div class="page" id="page-skills">
  <div class="tb"><div class="tb-l"><h2>âš¡ Skills Management</h2><p>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø¹Ø¨Ø± ClawHub</p></div>
    <div style="display:flex;gap:8px"><button class="btn btn-g sm">ğŸ“¦ ØªØ«Ø¨ÙŠØª ClawHub</button><button class="btn btn-r sm">ğŸ—‘ï¸ Ø¥Ø²Ø§Ù„Ø© ClawHub</button></div></div>
  <div class="content">
    <div class="card"><div class="ch"><h3>âš¡ Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø«Ø¨ØªØ©</h3></div>
      <div class="cb"><div class="g2">
        <div class="sk-i" style="margin-bottom:8px"><div class="sk-ic">ğŸ”</div><div style="flex:1"><div class="sk-n">web-search</div><div class="sk-d">Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª</div></div><span class="tag bg">v1.2 âœ…</span><button class="bti">ğŸ—‘ï¸</button></div>
        <div class="sk-i" style="margin-bottom:8px"><div class="sk-ic">ğŸ</div><div style="flex:1"><div class="sk-n">python-repl</div><div class="sk-d">ØªÙ†ÙÙŠØ° ÙƒÙˆØ¯ Python</div></div><span class="tag bg">v2.0 âœ…</span><button class="bti">ğŸ—‘ï¸</button></div>
      </div></div></div>
    <div class="card"><div class="ch"><h3>ğŸ›’ ClawHub Registry</h3></div>
      <div class="cb"><div class="g2">
        <div class="sk-i" style="margin-bottom:8px"><div class="sk-ic">ğŸ“Š</div><div style="flex:1"><div class="sk-n">data-analysis</div><div class="sk-d">ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</div></div><button class="btn btn-g xs">ØªØ«Ø¨ÙŠØª</button></div>
        <div class="sk-i" style="margin-bottom:8px"><div class="sk-ic">ğŸ“</div><div style="flex:1"><div class="sk-n">document-writer</div><div class="sk-d">ÙƒØªØ§Ø¨Ø© Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª</div></div><button class="btn btn-g xs">ØªØ«Ø¨ÙŠØª</button></div>
        <div class="sk-i" style="margin-bottom:8px"><div class="sk-ic">ğŸ–¼ï¸</div><div style="flex:1"><div class="sk-n">image-gen</div><div class="sk-d">ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØµÙˆØ±</div></div><button class="btn btn-g xs">ØªØ«Ø¨ÙŠØª</button></div>
        <div class="sk-i" style="margin-bottom:8px"><div class="sk-ic">ğŸ“§</div><div style="flex:1"><div class="sk-n">email-sender</div><div class="sk-d">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯</div></div><button class="btn btn-g xs">ØªØ«Ø¨ÙŠØª</button></div>
      </div></div></div>
  </div>
</div>

<!-- LOGS -->
<div class="page" id="page-logs">
  <div class="tb"><div class="tb-l"><h2>ğŸ“‹ Application Logs</h2><p>Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ</p></div>
    <div style="display:flex;gap:8px">
      <select style="width:auto;padding:5px 8px;font-size:12px" id="lf"><option value="ALL">All</option><option value="INFO">INFO</option><option value="WARN">WARN</option><option value="ERROR">ERROR</option></select>
      <button class="btn btn-s sm" onclick="clearLogs()">ğŸ—‘ï¸ Ù…Ø³Ø­</button>
      <button class="btn btn-s sm" onclick="addFakeLogs()">ğŸ”„ ØªØ­Ø¯ÙŠØ«</button>
    </div></div>
  <div class="content">
    <div class="card"><div class="cb" style="padding:0">
      <div class="log-a" style="border:none;border-radius:0" id="log-a">
        <div class="ll"><span class="lt">18:00:01</span><span class="lv INFO">INFO</span><span class="lm">ğŸ¦ OpenClaw Fortress started on port 7860</span></div>
        <div class="ll"><span class="lt">18:00:01</span><span class="lv INFO">INFO</span><span class="lm">Config loaded from /app/data/config.json</span></div>
        <div class="ll"><span class="lt">18:00:02</span><span class="lv INFO">INFO</span><span class="lm">Gradio UI mounted at /</span></div>
        <div class="ll"><span class="lt">18:00:02</span><span class="lv INFO">INFO</span><span class="lm">Webhook ready at /webhook/{token}</span></div>
        <div class="ll"><span class="lt">18:00:03</span><span class="lv INFO">INFO</span><span class="lm">Dashboard available at /admin</span></div>
      </div>
    </div></div>
  </div>
</div>

<!-- TESTING -->
<div class="page" id="page-testing">
  <div class="tb"><div class="tb-l"><h2>ğŸ§ª Testing & Diagnostics</h2><p>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ ÙˆØ§Ù„Ù…ÙƒÙˆÙ†Ø§Øª</p></div>
    <button class="btn btn-p" onclick="runAll()">â–¶ï¸ ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒÙ„</button></div>
  <div class="content">
    <div class="card"><div class="ch"><h3>ğŸ–¥ï¸ System Environment</h3></div>
      <div class="cb">
        <table class="tbl"><thead><tr><th>Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</th><th>Ø§Ù„Ù†ØªÙŠØ¬Ø©</th><th>ØªÙØ§ØµÙŠÙ„</th></tr></thead>
          <tbody>
            <tr><td>Web Server</td><td><span class="tag bg">âœ… Pass</span></td><td>Port 7860 active</td></tr>
            <tr><td>Config File</td><td><span class="tag bg">âœ… Pass</span></td><td>/app/data/config.json</td></tr>
            <tr><td>Active Model</td><td><span class="tag" id="t-model">â³ -</span></td><td id="t-model-d">-</td></tr>
            <tr><td>Telegram Token</td><td><span class="tag" id="t-tg">â³ -</span></td><td id="t-tg-d">-</td></tr>
            <tr><td>Web Search Tool</td><td><span class="tag" id="t-ws">â³ -</span></td><td id="t-ws-d">-</td></tr>
          </tbody>
        </table>
      </div></div>
    <div class="card"><div class="ch"><h3>ğŸ¤– AI Connection Test</h3></div>
      <div class="cb">
        <div style="display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap">
          <div style="flex:1;min-width:200px"><div class="fg" style="margin-bottom:0"><label>Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</label><input type="text" id="t-msg" value="Ù‚Ù„ Ù…Ø±Ø­Ø¨Ø§Ù‹ ÙÙŠ Ø¬Ù…Ù„Ø© ÙˆØ§Ø­Ø¯Ø©"></div></div>
          <button class="btn btn-p" onclick="testAI()" id="t-ai-btn">ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø±</button>
        </div>
        <div id="t-ai-res" style="margin-top:12px;display:none">
          <div style="font-weight:700;margin-bottom:6px;font-size:13px">Ø§Ù„Ù†ØªÙŠØ¬Ø©:</div>
          <div style="background:var(--bg);border:1px solid var(--border);border-radius:6px;padding:10px;font-size:13px;color:var(--t2)" id="t-ai-out"></div>
        </div>
      </div></div>
  </div>
</div>

<!-- SETTINGS -->
<div class="page" id="page-settings">
  <div class="tb"><div class="tb-l"><h2>âš™ï¸ Settings</h2><p>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆØ§Ù„Ø¨ÙˆØª</p></div>
    <button class="btn btn-p" onclick="saveSettings()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button></div>
  <div class="content">
    <div class="card"><div class="ch"><h3>ğŸ“ System Prompt</h3></div>
      <div class="cb">
        <div class="fg"><label>ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</label><textarea id="sys-prompt" rows="8" placeholder="Ø§ÙƒØªØ¨ Ø´Ø®ØµÙŠØ© Ø§Ù„Ø¨ÙˆØª Ù‡Ù†Ø§..."></textarea></div>
        <div class="fg"><label>Ù‚ÙˆØ§Ù„Ø¨ Ø¬Ø§Ù‡Ø²Ø©</label>
          <div style="display:flex;gap:7px;flex-wrap:wrap;margin-top:5px">
            <button class="btn btn-s sm" onclick="setTpl('openclaw')">ğŸ¦ OpenClaw</button>
            <button class="btn btn-s sm" onclick="setTpl('assistant')">ğŸ¤– Ù…Ø³Ø§Ø¹Ø¯</button>
            <button class="btn btn-s sm" onclick="setTpl('programmer')">ğŸ‘¨â€ğŸ’» Ù…Ø¨Ø±Ù…Ø¬</button>
            <button class="btn btn-s sm" onclick="setTpl('arabic')">ğŸŒ™ Ø¹Ø±Ø¨ÙŠ</button>
          </div>
        </div>
      </div></div>
    <div class="card"><div class="ch"><h3>ğŸ”§ Ø§Ù„Ø£Ø¯ÙˆØ§Øª</h3></div>
      <div class="cb">
        <div class="tr"><div><div class="ti-t">ğŸ” Ø¨Ø­Ø« Ø§Ù„ÙˆÙŠØ¨ (DuckDuckGo)</div><div class="ti-d">Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª Ù„Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø¯ÙŠØ«Ø©</div></div>
          <label class="sw"><input type="checkbox" id="t-ws-tog" onchange="saveSettings()"><div class="sw-t"></div><div class="sw-k"></div></label></div>
        <hr>
        <div class="tr"><div><div class="ti-t">ğŸ Python REPL</div><div class="ti-d">ØªÙ†ÙÙŠØ° ÙƒÙˆØ¯ Python Ù„Ù„Ø­Ø³Ø§Ø¨Ø§Øª ÙˆØ§Ù„ØªØ­Ù„ÙŠÙ„</div></div>
          <label class="sw"><input type="checkbox" id="t-repl-tog" onchange="saveSettings()"><div class="sw-t"></div><div class="sw-k"></div></label></div>
      </div></div>
    <div class="card"><div class="ch"><h3>ğŸ›ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø©</h3></div>
      <div class="cb"><div class="g2">
        <div class="fg"><label>Ø§Ø³Ù… Ø§Ù„Ø¨ÙˆØª</label><input type="text" id="s-bname" value="OpenClaw"></div>
        <div class="fg"><label>Ù„ØºØ© Ø§Ù„Ø±Ø¯</label><select id="s-lang"><option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option><option value="en">English</option><option value="auto">ØªÙ„Ù‚Ø§Ø¦ÙŠ</option></select></div>
      </div></div></div>
  </div>
</div>

</div><!-- /main -->

<!-- ADD MODEL MODAL -->
<div class="ov" id="modal-model">
<div class="modal">
  <div class="mh"><h3 id="mm-title">â• Ø¥Ø¶Ø§ÙØ© Ù†Ù…ÙˆØ°Ø¬</h3><button class="xb" onclick="closeModal('modal-model')">âœ•</button></div>
  <div class="mb">
    <input type="hidden" id="m-id">
    <div class="fg"><label>Ø§Ù„Ø§Ø³Ù… (Ù„Ù„Ø¹Ø±Ø¶)</label><input type="text" id="m-name" placeholder="Ù…Ø«Ø§Ù„: Llama 3 70BØŒ GPT-4o"></div>
    <div class="fg"><label>Ø§Ù„Ù…Ø²ÙˆØ¯</label>
      <select id="m-prov" onchange="onProv()">
        <option value="groq">âš¡ Groq (Ù…Ø¬Ø§Ù†ÙŠ ÙˆØ³Ø±ÙŠØ¹)</option>
        <option value="openai">ğŸŸ¢ OpenAI</option>
        <option value="anthropic">ğŸŸ  Anthropic</option>
        <option value="google">ğŸ”µ Google Gemini</option>
        <option value="deepseek">ğŸ‹ DeepSeek</option>
        <option value="mistral">ğŸŒŠ Mistral</option>
        <option value="cohere">ğŸŸ¡ Cohere</option>
        <option value="custom">ğŸ”§ Custom (OpenAI Compatible)</option>
      </select></div>
    <div class="fg"><label>Model ID</label>
      <select id="m-sel" onchange="document.getElementById('m-mid').value=this.value" style="margin-bottom:6px"><option value="">-- Ø§Ø®ØªØ± Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© --</option></select>
      <input type="text" id="m-mid" placeholder="Ø£Ùˆ Ø§ÙƒØªØ¨ Model ID Ù…Ø¨Ø§Ø´Ø±Ø©"></div>
    <div class="fg"><label>Base URL</label><input type="text" id="m-url" placeholder="https://api.groq.com/openai/v1"></div>
    <hr>
    <div class="fg"><label>Ù…ØµØ¯Ø± Ø§Ù„Ù€ API Key</label>
      <select id="m-ksrc" onchange="onKsrc()">
        <option value="env">ğŸ”’ HuggingFace Secrets (Ø¢Ù…Ù† ÙˆÙ…ÙˆØµÙ‰ Ø¨Ù‡)</option>
        <option value="direct">ğŸ“ Ù‚ÙŠÙ…Ø© Ù…Ø¨Ø§Ø´Ø±Ø©</option>
      </select></div>
    <div id="env-g" class="fg"><label>Ø§Ø³Ù… Ø§Ù„Ù€ Secret</label><input type="text" id="m-env" placeholder="Ù…Ø«Ø§Ù„: GROQ_KEY"><div class="fh">Ø£Ø¶ÙÙ‡ ÙÙŠ HuggingFace Space â†’ Settings â†’ Secrets</div></div>
    <div id="dir-g" class="fg" style="display:none"><label>API Key Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</label><input type="password" id="m-kval" placeholder="sk-..."></div>
    <div class="g2">
      <div class="fg"><label>Max Tokens</label><input type="number" id="m-tok" value="1024" min="100" max="32000"></div>
      <div class="fg"><label>Temperature</label><input type="number" id="m-tmp" value="0.7" min="0" max="2" step="0.1"></div>
    </div>
  </div>
  <div class="mf"><button class="btn btn-s" onclick="closeModal('modal-model')">Ø¥Ù„ØºØ§Ø¡</button><button class="btn btn-p" onclick="saveModel()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬</button></div>
</div>
</div>

<!-- MCP MODAL -->
<div class="ov" id="modal-mcp">
<div class="modal">
  <div class="mh"><h3>â• Ø¥Ø¶Ø§ÙØ© MCP Server</h3><button class="xb" onclick="closeModal('modal-mcp')">âœ•</button></div>
  <div class="mb">
    <div class="fg"><label>Ø§Ù„Ø§Ø³Ù…</label><input type="text" id="mcp-n" placeholder="filesystem, brave-search..."></div>
    <div class="fg"><label>Transport Type</label><select id="mcp-tr"><option value="stdio">stdio</option><option value="sse">SSE</option></select></div>
    <div class="fg"><label>Command</label><input type="text" id="mcp-cmd" placeholder="npx @modelcontextprotocol/server-filesystem"></div>
    <div class="fg"><label>Arguments (Ø³Ø·Ø± Ù„ÙƒÙ„ argument)</label><textarea id="mcp-args" rows="3" placeholder="/home/user/documents"></textarea></div>
    <div class="fg"><label>Environment Variables</label><textarea id="mcp-env" rows="2" placeholder="API_KEY=value"></textarea></div>
  </div>
  <div class="mf"><button class="btn btn-s" onclick="closeModal('modal-mcp')">Ø¥Ù„ØºØ§Ø¡</button><button class="btn btn-p" onclick="saveMcp()">ğŸ’¾ Ø¥Ø¶Ø§ÙØ©</button></div>
</div>
</div>

<div id="toasts"></div>

<script>
const PROVS={
  groq:{url:'https://api.groq.com/openai/v1',env:'GROQ_KEY',models:['llama3-70b-8192','llama3-8b-8192','mixtral-8x7b-32768','gemma2-9b-it','llama-3.1-70b-versatile','llama-3.1-8b-instant','llama-3.3-70b-versatile']},
  openai:{url:'https://api.openai.com/v1',env:'OPENAI_API_KEY',models:['gpt-4o','gpt-4o-mini','gpt-4-turbo','gpt-3.5-turbo','o1-mini','o1-preview']},
  anthropic:{url:'https://api.anthropic.com/v1',env:'ANTHROPIC_API_KEY',models:['claude-3-5-sonnet-20241022','claude-3-5-haiku-20241022','claude-3-haiku-20240307','claude-3-opus-20240229']},
  google:{url:'https://generativelanguage.googleapis.com/v1beta/openai',env:'GOOGLE_API_KEY',models:['gemini-1.5-pro','gemini-1.5-flash','gemini-2.0-flash','gemini-2.0-flash-lite']},
  deepseek:{url:'https://api.deepseek.com/v1',env:'DEEPSEEK_API_KEY',models:['deepseek-chat','deepseek-reasoner']},
  mistral:{url:'https://api.mistral.ai/v1',env:'MISTRAL_API_KEY',models:['mistral-large-latest','mistral-small-latest','open-mistral-7b','codestral-latest']},
  cohere:{url:'https://api.cohere.ai/compatibility/v1',env:'COHERE_API_KEY',models:['command-r-plus','command-r','command']},
  custom:{url:'',env:'CUSTOM_API_KEY',models:[]}
};
const TPLS={
  openclaw:`Ø£Ù†Øª OpenClawØŒ Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…ØªÙ‚Ø¯Ù… ğŸ¦\nÙ„Ø¯ÙŠÙƒ Ù‚Ø¯Ø±Ø§Øª Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ÙˆØªÙ†ÙÙŠØ° ÙƒÙˆØ¯ Python.\n- Ù„Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø¯ÙŠØ«Ø©: Ø§Ø³ØªØ®Ø¯Ù… web_search\n- Ù„Ù„Ø­Ø³Ø§Ø¨Ø§Øª ÙˆØ§Ù„ØªØ­Ù„ÙŠÙ„: Ø§Ø³ØªØ®Ø¯Ù… python_repl\nØµÙŠØºØ© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø£Ø¯Ø§Ø©:\nAction: [web_search Ø£Ùˆ python_repl]\nInput: [Ø§Ù„Ø¨Ø­Ø« Ø£Ùˆ Ø§Ù„ÙƒÙˆØ¯]`,
  assistant:`Ø£Ù†Øª Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…ØªÙ‚Ø¯Ù… ÙˆÙ…ÙÙŠØ¯.\nØ£Ø¬Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø¨Ø¯Ù‚Ø© ÙˆÙˆØ¶ÙˆØ­ ÙˆØ§Ø®ØªØµØ§Ø±.`,
  programmer:`Ø£Ù†Øª Ù…Ø¨Ø±Ù…Ø¬ Ø®Ø¨ÙŠØ± Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ù„ØºØ§Øª.\nØ³Ø§Ø¹Ø¯ ÙÙŠ ÙƒØªØ§Ø¨Ø© ÙˆØªØµØ­ÙŠØ­ Ø§Ù„ÙƒÙˆØ¯.\nØ§Ø³ØªØ®Ø¯Ù… python_repl Ù„Ù„Ù…Ø³Ø§Ø¦Ù„ Ø§Ù„Ø­Ø³Ø§Ø¨ÙŠØ© ÙˆØ§Ù„ØªØ­Ù„ÙŠÙ„.`,
  arabic:`Ø£Ù†Øª Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ ØªØªØ­Ø¯Ø« Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø¨Ø·Ù„Ø§Ù‚Ø©.\nØ§Ù„Ù„Ù‡Ø¬Ø© Ø§Ù„Ù…ØµØ±ÙŠØ© Ù…ÙØ¶Ù„Ø©. ÙƒÙ† ÙˆØ¯ÙˆØ¯Ø§Ù‹ ÙˆÙ…Ø®ØªØµØ±Ø§Ù‹ ÙˆØ¹Ù…Ù„ÙŠØ§Ù‹.`
};

let cfg=null;

function q(s){return document.querySelector(s)}
async function loadAll(){
  try{const r=await fetch('/api/config');cfg=await r.json();}
  catch(e){cfg={models:[],active_model_id:null,system_prompt:TPLS.openclaw,telegram_enabled:true,web_search_enabled:true,python_repl_enabled:true};}
  renderAll();
}
async function saveAPI(){
  try{const r=await fetch('/api/config',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(cfg)});return r.ok;}
  catch(e){return false;}
}
function renderAll(){renderDash();renderModels();renderSettings();renderTg();updateTests();}

function nav(p,el){
  document.querySelectorAll('.page').forEach(x=>x.classList.remove('on'));
  document.querySelectorAll('.ni').forEach(x=>x.classList.remove('on'));
  document.getElementById('page-'+p).classList.add('on');
  if(el)el.classList.add('on');
  else document.querySelectorAll('.ni').forEach(n=>{if(n.getAttribute('onclick')&&n.getAttribute('onclick').includes("'"+p+"'"))n.classList.add('on');});
}

function pIcon(p){return{groq:'âš¡',openai:'ğŸŸ¢',anthropic:'ğŸŸ ',google:'ğŸ”µ',deepseek:'ğŸ‹',mistral:'ğŸŒŠ',cohere:'ğŸŸ¡',custom:'ğŸ”§'}[p]||'ğŸ¤–';}

function renderDash(){
  if(!cfg)return;
  const am=cfg.models?.find(m=>m.id===cfg.active_model_id);
  document.getElementById('d-mname').textContent=am?am.name:'Ù„Ø§ ÙŠÙˆØ¬Ø¯';
  document.getElementById('d-mc').textContent=cfg.models?.length||0;
  document.getElementById('d-mc-tag').textContent=(cfg.models?.length||0)+' Ù†Ù…Ø§Ø°Ø¬';
  const tgOn=cfg.telegram_enabled!==false;
  document.getElementById('d-tg').textContent=tgOn?'Ù…ÙØ¹Ù„':'Ù…Ø¹Ø·Ù„';
  const tgTag=document.getElementById('d-tg-tag');tgTag.textContent=tgOn?'On':'Off';tgTag.className='tag '+(tgOn?'bg':'br');
  document.getElementById('d-tools').textContent=((cfg.web_search_enabled?1:0)+(cfg.python_repl_enabled?1:0))+'/2';
  const el=document.getElementById('d-active-model');
  if(am){el.innerHTML=`<div style="display:flex;align-items:center;gap:12px"><div style="font-size:32px">${pIcon(am.provider)}</div><div><div style="font-size:16px;font-weight:700">${am.name}</div><div style="font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--t3);margin-top:3px">${am.model_id}</div><div style="margin-top:7px;display:flex;gap:6px"><span class="tag bg">âœ“ Ù†Ø´Ø·</span><span class="tag bb">${am.provider}</span></div></div></div>`;}
  else{el.innerHTML=`<div style="color:var(--red);font-weight:600">âš ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ù†Ù…ÙˆØ°Ø¬! Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ AI Config.</div>`;}
  const host=window.location.hostname;
  document.getElementById('sys-wh').textContent=`${host}/webhook/***`;
  const whTag=document.getElementById('sys-wh-tag');whTag.textContent=tgOn?'Active':'Inactive';whTag.className='tag '+(tgOn?'bb':'br');
}

function renderModels(){
  if(!cfg)return;
  document.getElementById('mc-tag').textContent=(cfg.models?.length||0)+' Ù†Ù…ÙˆØ°Ø¬';
  const el=document.getElementById('models-list');
  if(!cfg.models?.length){el.innerHTML=`<div class="empty"><div class="ei">ğŸ¤–</div><h4>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†Ù…Ø§Ø°Ø¬ Ø¨Ø¹Ø¯</h4><p>Ø£Ø¶Ù Ù†Ù…ÙˆØ°Ø¬Ø§Ù‹ Ù„Ù„Ø¨Ø¯Ø¡ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙˆØª</p><button class="btn btn-p" onclick="openAddModel()">â• Ø¥Ø¶Ø§ÙØ© Ù†Ù…ÙˆØ°Ø¬</button></div>`;return;}
  el.innerHTML=cfg.models.map(m=>`<div class="mi ${m.id===cfg.active_model_id?'ac':''}">
    <div class="ma">${pIcon(m.provider)}</div>
    <div class="mn">
      <div class="mnt">${m.name} ${m.id===cfg.active_model_id?'<span class="tag bg">âœ“ Ù†Ø´Ø·</span>':''}<span class="tag bb" style="font-size:10px">${m.provider}</span></div>
      <div class="mm">${m.model_id} Â· ${m.api_key_source==='env'?'ğŸ”’ '+m.api_key_env:'ğŸ“ Ù…Ø¨Ø§Ø´Ø±'}</div>
    </div>
    <div class="mact">
      ${m.id!==cfg.active_model_id?`<button class="btn btn-g sm" onclick="activateM('${m.id}')">âœ“ ØªÙØ¹ÙŠÙ„</button>`:''}
      <button class="btn btn-s sm" onclick="editM('${m.id}')">âœï¸</button>
      <button class="btn btn-r sm" onclick="deleteM('${m.id}')">ğŸ—‘ï¸</button>
    </div></div>`).join('');
}

async function activateM(id){cfg.active_model_id=id;if(await saveAPI()){toast('âœ… ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬','ok');renderAll();}else toast('âŒ Ø®Ø·Ø£','err');}
async function deleteM(id){
  if(cfg.models.length===1){toast('âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø­Ø°Ù Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ÙˆØ­ÙŠØ¯','err');return;}
  cfg.models=cfg.models.filter(m=>m.id!==id);
  if(cfg.active_model_id===id)cfg.active_model_id=cfg.models[0]?.id;
  if(await saveAPI()){toast('âœ… ØªÙ… Ø§Ù„Ø­Ø°Ù','ok');renderAll();}
}

function openAddModel(){
  document.getElementById('mm-title').textContent='â• Ø¥Ø¶Ø§ÙØ© Ù†Ù…ÙˆØ°Ø¬ Ø¬Ø¯ÙŠØ¯';
  document.getElementById('m-id').value='';
  ['m-name','m-mid','m-kval'].forEach(id=>document.getElementById(id).value='');
  document.getElementById('m-prov').value='groq';document.getElementById('m-ksrc').value='env';
  document.getElementById('m-tok').value='1024';document.getElementById('m-tmp').value='0.7';
  onProv();onKsrc();openModal('modal-model');
}
function quickAdd(p){
  document.getElementById('m-prov').value=p;
  openAddModel();
}
function editM(id){
  const m=cfg.models.find(x=>x.id===id);if(!m)return;
  document.getElementById('mm-title').textContent='âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬';
  document.getElementById('m-id').value=m.id;document.getElementById('m-name').value=m.name;
  document.getElementById('m-prov').value=m.provider;document.getElementById('m-mid').value=m.model_id;
  document.getElementById('m-url').value=m.base_url||'';document.getElementById('m-ksrc').value=m.api_key_source||'env';
  document.getElementById('m-env').value=m.api_key_env||'';document.getElementById('m-kval').value=m.api_key_value||'';
  document.getElementById('m-tok').value=m.max_tokens||1024;document.getElementById('m-tmp').value=m.temperature||0.7;
  onProv();onKsrc();openModal('modal-model');
}
async function saveModel(){
  const name=document.getElementById('m-name').value.trim();
  const mid=document.getElementById('m-mid').value.trim();
  if(!name||!mid){toast('âš ï¸ Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ù€ Model ID Ù…Ø·Ù„ÙˆØ¨Ø§Ù†','err');return;}
  const p=document.getElementById('m-prov').value;
  const m={id:document.getElementById('m-id').value||'m_'+Date.now(),name,provider:p,model_id:mid,
    base_url:document.getElementById('m-url').value.trim()||PROVS[p]?.url||'',
    api_key_source:document.getElementById('m-ksrc').value,
    api_key_env:document.getElementById('m-env').value.trim(),
    api_key_value:document.getElementById('m-kval').value.trim(),
    max_tokens:parseInt(document.getElementById('m-tok').value)||1024,
    temperature:parseFloat(document.getElementById('m-tmp').value)||0.7};
  const eid=document.getElementById('m-id').value;
  if(eid){const i=cfg.models.findIndex(x=>x.id===eid);if(i>=0)cfg.models[i]=m;}
  else{cfg.models.push(m);if(!cfg.active_model_id)cfg.active_model_id=m.id;}
  if(await saveAPI()){toast('âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬','ok');closeModal('modal-model');renderAll();}
  else toast('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ÙØ¸','err');
}
function onProv(){
  const p=document.getElementById('m-prov').value,pd=PROVS[p]||{};
  const sel=document.getElementById('m-sel');
  sel.innerHTML='<option value="">-- Ø§Ø®ØªØ± --</option>'+(pd.models||[]).map(m=>`<option value="${m}">${m}</option>`).join('');
  if(pd.url)document.getElementById('m-url').value=pd.url;
  if(pd.env)document.getElementById('m-env').value=pd.env;
}
function onKsrc(){
  const s=document.getElementById('m-ksrc').value;
  document.getElementById('env-g').style.display=s==='env'?'block':'none';
  document.getElementById('dir-g').style.display=s==='direct'?'block':'none';
}

function renderTg(){
  if(!cfg)return;
  const on=cfg.telegram_enabled!==false;
  document.getElementById('tg-on').checked=on;
  const tag=document.getElementById('tg-hd-tag');tag.textContent=on?'Ù…ÙØ¹Ù„':'Ù…Ø¹Ø·Ù„';tag.className='tag '+(on?'bg':'br');
  const host=window.location.hostname;
  document.getElementById('tg-wh').textContent=`https://${host}/webhook/[TOKEN]`;
}
async function saveTg(){
  cfg.telegram_enabled=document.getElementById('tg-on').checked;
  if(await saveAPI())toast('âœ… ØªÙ… Ø§Ù„Ø­ÙØ¸','ok');
  renderTg();renderDash();
}
function copyWh(){
  const host=window.location.hostname;
  navigator.clipboard.writeText(`https://${host}/webhook/[TELEGRAM_BOT_TOKEN]`).then(()=>toast('ğŸ“‹ ØªÙ… Ø§Ù„Ù†Ø³Ø® â€” Ø§Ø³ØªØ¨Ø¯Ù„ [TELEGRAM_BOT_TOKEN] Ø¨Ø§Ù„ØªÙˆÙƒÙ†','inf'));
}
function regWh(){
  const host=window.location.hostname;
  toast('ğŸ’¡ Ø§Ø³ØªØ¨Ø¯Ù„ TOKEN Ø¨Ø§Ù„ØªÙˆÙƒÙ† Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ ÙÙŠ Ø§Ù„Ø±Ø§Ø¨Ø·','inf');
  window.open(`https://api.telegram.org/botTOKEN/setWebhook?url=https://${host}/webhook/TOKEN`,'_blank');
}
async function chkWh(){
  try{const r=await fetch('/health');const d=await r.json();document.getElementById('tg-st').innerHTML=`<span style="color:var(--green)">âœ… Ø§Ù„Ø³ÙŠØ±ÙØ± ÙŠØ¹Ù…Ù„ Â· Ø§Ù„Ù†Ù…ÙˆØ°Ø¬: ${d.active_model||'-'}</span>`;}
  catch(e){document.getElementById('tg-st').innerHTML=`<span style="color:var(--red)">âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§Ø³ØªØ¬Ø§Ø¨Ø©</span>`;}
}

function renderSettings(){
  if(!cfg)return;
  document.getElementById('sys-prompt').value=cfg.system_prompt||'';
  document.getElementById('t-ws-tog').checked=cfg.web_search_enabled!==false;
  document.getElementById('t-repl-tog').checked=cfg.python_repl_enabled!==false;
}
async function saveSettings(){
  cfg.system_prompt=document.getElementById('sys-prompt').value;
  cfg.web_search_enabled=document.getElementById('t-ws-tog').checked;
  cfg.python_repl_enabled=document.getElementById('t-repl-tog').checked;
  if(await saveAPI())toast('âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª','ok');
  else toast('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ÙØ¸','err');
  renderDash();
}
function setTpl(t){document.getElementById('sys-prompt').value=TPLS[t]||'';}

async function saveAgents(){
  if(!cfg.agents)cfg.agents={};
  cfg.agents.maxSpawnDepth=parseInt(document.getElementById('a-depth').value)||2;
  cfg.agents.maxChildren=parseInt(document.getElementById('a-ch').value)||3;
  cfg.agents.maxConcurrent=parseInt(document.getElementById('a-co').value)||5;
  if(await saveAPI())toast('âœ… ØªÙ… Ø§Ù„Ø­ÙØ¸','ok');
}

function saveMcp(){toast('âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© MCP Server','ok');closeModal('modal-mcp');}

function updateTests(){
  if(!cfg)return;
  const hm=cfg.models?.length>0;
  const tm=document.getElementById('t-model');tm.className='tag '+(hm?'bg':'br');tm.textContent=hm?'âœ… Pass':'âŒ Fail';
  document.getElementById('t-model-d').textContent=hm?cfg.models.find(m=>m.id===cfg.active_model_id)?.name||'-':'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù†Ù…ÙˆØ°Ø¬';
  const tgOn=cfg.telegram_enabled!==false;
  const tt=document.getElementById('t-tg');tt.className='tag '+(tgOn?'bg':'by');tt.textContent=tgOn?'âœ… Ù…ÙØ¹Ù„':'âš ï¸ Ù…Ø¹Ø·Ù„';
  document.getElementById('t-tg-d').textContent=tgOn?'Webhook active':'ØºÙŠØ± Ù…ÙØ¹Ù„';
  const wsOn=cfg.web_search_enabled!==false;
  const tw=document.getElementById('t-ws');tw.className='tag '+(wsOn?'bg':'by');tw.textContent=wsOn?'âœ… Ù…ÙØ¹Ù„':'âš ï¸ Ù…Ø¹Ø·Ù„';
  document.getElementById('t-ws-d').textContent=wsOn?'DuckDuckGo ready':'ØºÙŠØ± Ù…ÙØ¹Ù„';
}

async function runAll(){toast('ğŸ§ª Ø¬Ø§Ø±ÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª...','inf');updateTests();await testAI();}

async function testAI(){
  const btn=document.getElementById('t-ai-btn');const msg=document.getElementById('t-msg').value||'Ù…Ø±Ø­Ø¨Ø§';
  btn.disabled=true;btn.textContent='â³ Ø¬Ø§Ø±ÙŠ...';
  document.getElementById('t-ai-res').style.display='none';
  try{
    const r=await fetch('/api/test-ai',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({message:msg})});
    const d=await r.json();
    document.getElementById('t-ai-out').textContent=d.response||d.error||'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ø¯';
  }catch(e){document.getElementById('t-ai-out').textContent='âš ï¸ ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯ Ù†Ù…ÙˆØ°Ø¬ AI Ø£ÙˆÙ„Ø§Ù‹ ÙÙŠ ØµÙØ­Ø© AI Config';}
  document.getElementById('t-ai-res').style.display='block';
  btn.disabled=false;btn.textContent='ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø±';
}

function clearLogs(){document.getElementById('log-a').innerHTML='';}
function addFakeLogs(){
  const la=document.getElementById('log-a');
  const now=new Date().toLocaleTimeString('en-GB');
  la.innerHTML+=`<div class="ll"><span class="lt">${now}</span><span class="lv INFO">INFO</span><span class="lm">Config refreshed from /app/data/config.json</span></div>`;
  la.scrollTop=la.scrollHeight;
}

function openModal(id){document.getElementById(id).classList.add('op');}
function closeModal(id){document.getElementById(id).classList.remove('op');}
document.querySelectorAll('.ov').forEach(o=>o.addEventListener('click',e=>{if(e.target===o)o.classList.remove('op');}));

function toast(msg,type='ok'){
  const c=document.getElementById('toasts');
  const el=document.createElement('div');el.className=`toast ${type}`;el.textContent=msg;
  c.appendChild(el);setTimeout(()=>el.remove(),3500);
}

loadAll();
</script>
</body>
</html>
