<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¦ OpenClaw Fortress - Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --claw-500: #f94d3a;
            --claw-600: #e63024;
            --dark-900: #0a0a0b;
            --dark-800: #111113;
            --dark-700: #1a1a1d;
            --dark-600: #242428;
        }
        body { font-family: 'Cairo', sans-serif; background: var(--dark-900); color: #e6edf3; }
        .gradient-text { background: linear-gradient(135deg, #f94d3a, #a78bfa); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .card { background: var(--dark-800); border: 1px solid var(--dark-600); border-radius: 12px; }
        .sidebar-item { transition: all 0.2s; }
        .sidebar-item:hover, .sidebar-item.active { background: var(--dark-700); border-right: 3px solid var(--claw-500); }
        .btn-primary { background: linear-gradient(135deg, #f94d3a, #e63024); }
        .btn-primary:hover { opacity: 0.9; }
        .toggle-on { background: var(--claw-500); }
        .toggle-off { background: var(--dark-600); }
        .log-entry { font-family: monospace; font-size: 12px; padding: 4px 8px; border-bottom: 1px solid var(--dark-600); }
        .log-DEBUG { color: #6b7280; }
        .log-INFO { color: #22c55e; }
        .log-WARNING { color: #f59e0b; }
        .log-ERROR { color: #ef4444; }
        .log-CRITICAL { color: #dc2626; background: rgba(239, 68, 68, 0.1); }
        .scroll-y { overflow-y: auto; max-height: 400px; }
    </style>
</head>
<body class="min-h-screen">
    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar -->
        <aside class="w-64 bg-[#111113] border-l border-[#242428] flex flex-col flex-shrink-0">
            <div class="p-4 border-b border-[#242428]">
                <h1 class="text-2xl font-bold gradient-text">ğŸ¦ OpenClaw</h1>
                <p class="text-xs text-gray-500">Fortress v2.0</p>
            </div>
            <nav class="flex-1 p-2 space-y-1 overflow-y-auto">
                <a href="#" class="sidebar-item active flex items-center gap-3 px-4 py-3 rounded-lg" data-page="dashboard"><span>ğŸ“Š</span><span>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</span></a>
                <a href="#" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-lg" data-page="models"><span>ğŸ¤–</span><span>Ø§Ù„Ù†Ù…Ø§Ø°Ø¬</span></a>
                <a href="#" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-lg" data-page="skills"><span>âš¡</span><span>Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª</span></a>
                <a href="#" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-lg" data-page="mcp"><span>ğŸ”Œ</span><span>MCP</span></a>
                <a href="#" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-lg" data-page="agents"><span>ğŸ§ </span><span>Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡</span></a>
                <a href="#" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-lg" data-page="scheduler"><span>â°</span><span>Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø©</span></a>
                <a href="#" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-lg" data-page="prompt"><span>ğŸ“</span><span>Ø§Ù„Ø¨Ø±ÙˆÙ…Ø¨Øª</span></a>
                <a href="#" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-lg" data-page="threads"><span>ğŸ’¬</span><span>Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª</span></a>
                <a href="#" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-lg" data-page="logs"><span>ğŸ“‹</span><span>Ø§Ù„Ø³Ø¬Ù„Ø§Øª</span></a>
                <a href="#" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-lg" data-page="usage"><span>ğŸ“ˆ</span><span>Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</span></a>
                <a href="#" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-lg bg-gradient-to-l from-red-900/30 to-purple-900/30" data-page="nuclear"><span>â˜¢ï¸</span><span>Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù†ÙˆÙˆÙŠ</span></a>
                <a href="#" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-lg" data-page="settings"><span>âš™ï¸</span><span>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</span></a>
            </nav>
            <div class="p-4 border-t border-[#242428]">
                <a href="/" class="block text-center py-2 bg-[#1a1a1d] rounded-lg hover:bg-[#242428]">ğŸ’¬ ÙØªØ­ Ø§Ù„Ø´Ø§Øª</a>
            </div>
        </aside>
        <!-- Main Content -->
        <main class="flex-1 overflow-auto p-6" id="main-content"></main>
    </div>
    <script>
    const API = '/api';
    let state = { config: null, models: [], skills: [], threads: [], usage: {}, mcp: [], agents: [], tasks: [], logs: [], activePage: 'dashboard' };
    let ws = null;
    
    async function api(endpoint, options = {}) {
        const res = await fetch(API + endpoint, { headers: { 'Content-Type': 'application/json' }, ...options });
        return res.json();
    }
    
    async function loadState() {
        const [config, models, skills, usage, threads, mcp, agents, tasks, logs] = await Promise.all([
            api('/config'), api('/models'), api('/skills/registry'), api('/usage'), api('/threads'),
            api('/mcp'), api('/agents'), api('/scheduler/tasks'), api('/logs?limit=50')
        ]);
        state = { ...state, config, models: models.models, skills: skills.skills, usage, threads: threads.threads, mcp: mcp.servers, agents: agents.agents, tasks: tasks.tasks, logs: logs.logs };
        renderPage(state.activePage);
    }
    
    function $(id) { return document.getElementById(id); }
    
    document.querySelectorAll('.sidebar-item').forEach(el => {
        el.onclick = (e) => { e.preventDefault(); document.querySelectorAll('.sidebar-item').forEach(i => i.classList.remove('active')); el.classList.add('active'); state.activePage = el.dataset.page; renderPage(el.dataset.page); };
    });
    
    function renderPage(page) {
        const content = $('main-content');
        const pages = {
            dashboard: renderDashboard, models: renderModels, skills: renderSkills, mcp: renderMCP,
            agents: renderAgents, scheduler: renderScheduler, prompt: renderPrompt, threads: renderThreads,
            logs: renderLogs, usage: renderUsage, settings: renderSettings, nuclear: renderNuclear
        };
        content.innerHTML = pages[page] ? pages[page]() : '<p>ØµÙØ­Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©</p>';
    }
    
    function renderDashboard() {
        const activeModel = state.models?.find(m => m.id === state.config?.active_model_id);
        const enabledSkills = state.skills?.filter(s => s.enabled) || [];
        const hasModels = state.models?.length > 0;
        const needsSetup = !activeModel;
        
        if (needsSetup) {
            return `<h2 class="text-2xl font-bold mb-6 gradient-text">ğŸ¦ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ OpenClaw Fortress</h2>
            <div class="card p-8 mb-6 text-center border-2 border-[#f94d3a]">
                <div class="text-6xl mb-4">ğŸ¦</div>
                <h3 class="text-xl font-bold mb-2">ÙŠØ¨Ø¯Ùˆ Ø£Ù†Ùƒ Ø¬Ø¯ÙŠØ¯ Ù‡Ù†Ø§!</h3>
                <p class="text-gray-400 mb-6">Ù„Ù†Ø¨Ø¯Ø£ Ø¨Ø¥Ø¶Ø§ÙØ© Ù†Ù…ÙˆØ°Ø¬ AI Ù„Ù„Ø¹Ù…Ù„</p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                    <div class="card p-4 cursor-pointer hover:border-[#f94d3a]" onclick="showAddProvider('groq')">
                        <div class="text-3xl mb-2">âš¡</div>
                        <div class="font-bold">Groq</div>
                        <div class="text-xs text-green-400">Ù…Ø¬Ø§Ù†ÙŠ</div>
                    </div>
                    <div class="card p-4 cursor-pointer hover:border-[#f94d3a]" onclick="showAddProvider('google')">
                        <div class="text-3xl mb-2">ğŸ”µ</div>
                        <div class="font-bold">Google Gemini</div>
                        <div class="text-xs text-green-400">Ù…Ø¬Ø§Ù†ÙŠ</div>
                    </div>
                    <div class="card p-4 cursor-pointer hover:border-[#f94d3a]" onclick="showAddProvider('cerebras')">
                        <div class="text-3xl mb-2">ğŸš€</div>
                        <div class="font-bold">Cerebras</div>
                        <div class="text-xs text-green-400">Ù…Ø¬Ø§Ù†ÙŠ</div>
                    </div>
                </div>
                <div class="text-sm text-gray-500">
                    <p>ğŸ’¡ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ API Key Ù…Ø¬Ø§Ù†ÙŠ:</p>
                    <p>Groq: <a href="https://console.groq.com" class="text-[#f94d3a]" target="_blank">console.groq.com</a></p>
                    <p>Gemini: <a href="https://aistudio.google.com" class="text-[#f94d3a]" target="_blank">aistudio.google.com</a></p>
                </div>
            </div>
            <div class="card p-6">
                <h3 class="font-bold mb-4">âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª HF Spaces Secrets</h3>
                <p class="text-sm text-gray-400 mb-2">Ø£Ø¶Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ÙÙŠ Settings > Secrets:</p>
                <code class="block bg-[#0a0a0b] p-3 rounded text-sm">
                    GROQ_API_KEY=gsk_xxx<br>
                    TELEGRAM_BOT_TOKEN=xxx (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
                </code>
            </div>`;
        }
        
        return `<h2 class="text-2xl font-bold mb-6 gradient-text">ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
            <div class="card p-4"><div class="text-3xl mb-2">ğŸ¤–</div><div class="text-sm text-gray-400">Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù†Ø´Ø·</div><div class="font-bold">${activeModel?.name || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</div></div>
            <div class="card p-4"><div class="text-3xl mb-2">ğŸ“¦</div><div class="text-sm text-gray-400">Ø§Ù„Ù†Ù…Ø§Ø°Ø¬</div><div class="font-bold">${state.models?.length || 0}</div></div>
            <div class="card p-4"><div class="text-3xl mb-2">âš¡</div><div class="text-sm text-gray-400">Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª</div><div class="font-bold">${enabledSkills.length}</div></div>
            <div class="card p-4"><div class="text-3xl mb-2">ğŸ“ˆ</div><div class="text-sm text-gray-400">Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div><div class="font-bold">${state.usage?.total_requests || 0}</div></div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
            <div class="card p-4"><h3 class="font-bold mb-2">ğŸ”Œ MCP Servers</h3><div class="text-2xl">${state.mcp?.length || 0}</div></div>
            <div class="card p-4"><h3 class="font-bold mb-2">ğŸ§  Agents</h3><div class="text-2xl">${state.agents?.length || 0}</div></div>
        </div>
        <div class="card p-6 mb-6"><h3 class="font-bold mb-4">ğŸ¯ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù†Ø´Ø·</h3><div class="flex items-center justify-between"><div><span class="text-2xl ml-2">${activeModel?.provider === 'groq' ? 'âš¡' : activeModel?.provider === 'google' ? 'ğŸ”µ' : 'ğŸŸ¢'}</span><span class="font-bold">${activeModel?.name || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</span></div><button onclick="testAI()" class="px-4 py-2 btn-primary rounded-lg">ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø±</button></div></div>
        <div class="card p-6"><h3 class="font-bold mb-4">âš¡ Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ù…ÙØ¹Ù„Ø©</h3><div class="flex flex-wrap gap-2">${enabledSkills.map(s => `<span class="px-3 py-1 bg-[#1a1a1d] rounded-full text-sm">${s.icon} ${s.name}</span>`).join('') || '<span class="text-gray-500">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‡Ø§Ø±Ø§Øª Ù…ÙØ¹Ù„Ø©</span>'}</div></div>`;
    }
    
    function showAddProvider(provider) {
        alert(`Ù„Ø¥Ø¶Ø§ÙØ© ${provider}:\n\n1. Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ API Key Ù…Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹\n2. Ø£Ø¶ÙÙ‡ ÙÙŠ HF Spaces Secrets\n3. Ø£Ø¹Ø¯ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù€ Space`);
    }
    
    function renderModels() {
        return `<div class="flex justify-between items-center mb-6"><h2 class="text-2xl font-bold gradient-text">ğŸ¤– Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ù…Ø§Ø°Ø¬</h2></div>
        <div class="grid gap-4">${state.models?.map(m => `<div class="card p-4 ${m.id === state.config?.active_model_id ? 'border-[#f94d3a]' : ''}"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><span class="text-2xl">${m.provider === 'groq' ? 'âš¡' : m.provider === 'google' ? 'ğŸ”µ' : m.provider === 'cerebras' ? 'ğŸš€' : 'ğŸŸ¢'}</span><div><div class="font-bold">${m.name}</div><div class="text-sm text-gray-500">${m.model_id}</div></div></div><div class="flex gap-2">${m.id !== state.config?.active_model_id ? `<button onclick="activateModel('${m.id}')" class="px-3 py-1 bg-[#1a1a1d] rounded hover:bg-[#242428]">ØªÙØ¹ÙŠÙ„</button>` : '<span class="px-3 py-1 bg-[#f94d3a] rounded text-sm">Ù†Ø´Ø·</span>'}</div></div></div>`).join('') || ''}</div>`;
    }
    
    function renderSkills() {
        return `<h2 class="text-2xl font-bold mb-6 gradient-text">âš¡ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª</h2>
        <div class="grid gap-4">${state.skills?.map(s => `<div class="card p-4 flex items-center justify-between"><div class="flex items-center gap-3"><span class="text-2xl">${s.icon}</span><div><div class="font-bold">${s.name}</div><div class="text-sm text-gray-500">${s.description}</div></div></div><button onclick="toggleSkill('${s.id}', ${!s.enabled})" class="w-12 h-6 rounded-full ${s.enabled ? 'toggle-on' : 'toggle-off'} relative"><span class="absolute w-5 h-5 bg-white rounded-full top-0.5 transition-all ${s.enabled ? 'right-0.5' : 'left-0.5'}"></span></button></div>`).join('') || ''}</div>`;
    }
    
    function renderMCP() {
        return `<h2 class="text-2xl font-bold mb-6 gradient-text">ğŸ”Œ MCP Servers</h2>
        <div class="grid gap-4">${state.mcp?.map(s => `<div class="card p-4"><div class="flex items-center justify-between"><div><div class="font-bold">${s.name}</div><div class="text-sm text-gray-500">${s.transport} - ${s.status}</div></div><div class="flex gap-2"><button onclick="testMCPServer('${s.name}')" class="px-3 py-1 bg-[#1a1a1d] rounded hover:bg-[#242428]">Ø§Ø®ØªØ¨Ø§Ø±</button></div></div></div>`).join('') || '<div class="text-gray-500">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø®ÙˆØ§Ø¯Ù… MCP</div>'}</div>`;
    }
    
    function renderAgents() {
        return `<h2 class="text-2xl font-bold mb-6 gradient-text">ğŸ§  Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡</h2>
        <div class="grid gap-4">${state.agents?.map(a => `<div class="card p-4 ${a.is_default ? 'border-[#f94d3a]' : ''}"><div class="flex items-center justify-between"><div><div class="font-bold">${a.name}</div><div class="text-sm text-gray-500">${a.description || a.id}</div></div>${a.is_default ? '<span class="px-2 py-1 bg-[#f94d3a] rounded text-xs">Ø§ÙØªØ±Ø§Ø¶ÙŠ</span>' : ''}</div></div>`).join('') || ''}</div>`;
    }
    
    function renderScheduler() {
        return `<h2 class="text-2xl font-bold mb-6 gradient-text">â° Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…Ø¬Ø¯ÙˆÙ„Ø©</h2>
        <div class="grid gap-4">${state.tasks?.map(t => `<div class="card p-4"><div class="flex items-center justify-between"><div><div class="font-bold">${t.name}</div><div class="text-sm text-gray-500">${t.schedule}</div></div><span class="px-2 py-1 ${t.enabled ? 'bg-green-900/30 text-green-400' : 'bg-gray-800 text-gray-400'} rounded text-xs">${t.enabled ? 'Ù…ÙØ¹Ù‘Ù„' : 'Ù…Ø¹Ø·Ù‘Ù„'}</span></div></div>`).join('') || '<div class="text-gray-500">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‡Ø§Ù… Ù…Ø¬Ø¯ÙˆÙ„Ø©</div>'}</div>`;
    }
    
    function renderPrompt() {
        return `<h2 class="text-2xl font-bold mb-6 gradient-text">ğŸ“ ØªØ­Ø±ÙŠØ± Ø§Ù„Ø¨Ø±ÙˆÙ…Ø¨Øª</h2>
        <div class="card p-6"><textarea id="prompt-editor" class="w-full h-64 bg-[#0a0a0b] border border-[#242428] rounded-lg p-4 text-sm" dir="rtl">${state.config?.system_prompt || ''}</textarea><div class="flex gap-2 mt-4"><button onclick="savePrompt()" class="px-4 py-2 btn-primary rounded-lg">ğŸ’¾ Ø­ÙØ¸</button></div></div>`;
    }
    
    function renderThreads() {
        return `<h2 class="text-2xl font-bold mb-6 gradient-text">ğŸ’¬ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª</h2>
        <div class="card divide-y divide-[#242428]">${state.threads?.map(t => `<div class="p-4 flex justify-between items-center hover:bg-[#1a1a1d]"><div><div class="font-bold">${t.title}</div><div class="text-sm text-gray-500">${new Date(t.updated_at).toLocaleDateString('ar')}</div></div><button onclick="deleteThread('${t.id}')" class="text-red-400 hover:text-red-300">ğŸ—‘ï¸</button></div>`).join('') || '<div class="p-4 text-gray-500 text-center">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø­Ø§Ø¯Ø«Ø§Øª</div>'}</div>`;
    }
    
    function renderLogs() {
        return `<h2 class="text-2xl font-bold mb-6 gradient-text">ğŸ“‹ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h2>
        <div class="card p-4 scroll-y" id="logs-container">${state.logs?.map(l => `<div class="log-entry log-${l.level}"><span class="text-gray-500">[${new Date(l.timestamp).toLocaleTimeString()}]</span> <span class="font-bold">${l.level}</span> <span class="text-gray-400">${l.source}:</span> ${l.message}</div>`).join('') || '<div class="text-gray-500">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³Ø¬Ù„Ø§Øª</div>'}</div>
        <div class="mt-4"><button onclick="clearLogs()" class="px-4 py-2 bg-red-900/30 text-red-400 rounded-lg">Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„Ø§Øª</button></div>`;
    }
    
    function renderUsage() {
        return `<h2 class="text-2xl font-bold mb-6 gradient-text">ğŸ“ˆ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
            <div class="card p-6"><div class="text-4xl font-bold gradient-text">${state.usage?.total_requests || 0}</div><div class="text-gray-400">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div></div>
            <div class="card p-6"><div class="text-4xl font-bold gradient-text">${state.usage?.total_tokens?.toLocaleString() || 0}</div><div class="text-gray-400">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙˆÙƒÙ†Ø²</div></div>
        </div>
        <div class="card p-6"><h3 class="font-bold mb-4">Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø­Ø³Ø¨ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬</h3><div class="space-y-2">${Object.entries(state.usage?.models || {}).map(([k,v]) => `<div class="flex justify-between"><span>${k}</span><span>${v.requests} Ø·Ù„Ø¨ | ${v.tokens?.toLocaleString()} ØªÙˆÙƒÙ†</span></div>`).join('') || '<div class="text-gray-500">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª</div>'}</div></div>`;
    }
    
    function renderSettings() {
        return `<h2 class="text-2xl font-bold mb-6 gradient-text">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h2>
        <div class="space-y-4">
            <div class="card p-6"><h3 class="font-bold mb-4">ğŸ’¾ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ</h3><div class="flex gap-2"><button onclick="exportBackup()" class="px-4 py-2 btn-primary rounded-lg">ğŸ“¤ ØªØµØ¯ÙŠØ±</button><label class="px-4 py-2 bg-[#1a1a1d] rounded-lg cursor-pointer hover:bg-[#242428]">ğŸ“¥ Ø§Ø³ØªÙŠØ±Ø§Ø¯<input type="file" class="hidden" accept=".json" onchange="importBackup(this)"></label></div></div>
            <div class="card p-6"><h3 class="font-bold mb-4">â„¹ï¸ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h3><div class="space-y-2 text-sm"><div class="flex justify-between"><span class="text-gray-400">Ø§Ù„Ø¥ØµØ¯Ø§Ø±</span><span>${state.config?.version || '2.0.0'}</span></div><div class="flex justify-between"><span class="text-gray-400">Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù†Ø´Ø·</span><span>${state.config?.active_model_id || '-'}</span></div><div class="flex justify-between"><span class="text-gray-400">ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…</span><span>${state.config?.telegram_enabled ? 'âœ… Ù…ÙØ¹Ù‘Ù„' : 'âŒ Ù…Ø¹Ø·Ù‘Ù„'}</span></div></div></div>
        </div>`;
    }
    
    async function activateModel(id) { await api(`/models/${id}/activate`, { method: 'POST' }); await loadState(); }
    async function toggleSkill(id, enabled) { await api(`/skills/registry/${id}/${enabled ? 'enable' : 'disable'}`, { method: 'POST' }); await loadState(); }
    async function deleteThread(id) { await api(`/threads/${id}`, { method: 'DELETE' }); await loadState(); }
    async function savePrompt() { await api('/prompt', { method: 'POST', body: JSON.stringify({ prompt: $('prompt-editor').value }) }); alert('âœ… ØªÙ… Ø§Ù„Ø­ÙØ¸'); }
    async function testAI() { const r = await api('/test-ai', { method: 'POST', body: JSON.stringify({ message: 'Ù…Ø±Ø­Ø¨Ø§' }) }); alert(r.ok ? r.response : r.error); }
    async function testMCPServer(name) { const r = await api(`/mcp/${name}/test`, { method: 'POST' }); alert(r.ok ? 'âœ… ÙŠØ¹Ù…Ù„' : r.error); }
    async function exportBackup() { const data = await api('/backup'); const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' }); const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'openclaw-backup.json'; a.click(); }
    async function importBackup(input) { const file = input.files[0]; if(file) { const text = await file.text(); await api('/restore', { method: 'POST', body: text }); await loadState(); alert('âœ… ØªÙ… Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯'); } }
    async function clearLogs() { await api('/logs', { method: 'DELETE' }); await loadState(); }
    
    function renderNuclear() {
        return `<h2 class="text-2xl font-bold mb-6 gradient-text">â˜¢ï¸ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù†ÙˆÙˆÙŠ - Self-Healing & Auto-Update</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
            <div class="card p-4 border-green-500"><div class="text-3xl mb-2">ğŸ”„</div><div class="text-sm text-gray-400">Auto-Update</div><div class="font-bold text-green-400">Ù…ÙØ¹Ù‘Ù„</div></div>
            <div class="card p-4 border-blue-500"><div class="text-3xl mb-2">ğŸ’Š</div><div class="text-sm text-gray-400">Self-Healing</div><div class="font-bold text-blue-400">Ù…ÙØ¹Ù‘Ù„</div></div>
            <div class="card p-4 border-purple-500"><div class="text-3xl mb-2">ğŸ“Š</div><div class="text-sm text-gray-400">Health Monitor</div><div class="font-bold text-purple-400">Ù…ÙØ¹Ù‘Ù„</div></div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
            <div class="card p-6"><h3 class="font-bold mb-4">ğŸ”„ Auto-Update</h3><div class="space-y-2"><div class="flex justify-between"><span>Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ</span><span class="font-bold">v2.0.0-nuclear</span></div><div class="flex justify-between"><span>Ø¢Ø®Ø± ÙØ­Øµ</span><span id="last-check">-</span></div><div class="flex justify-between"><span>ØªØ­Ø¯ÙŠØ« Ù…ØªØ§Ø­</span><span id="update-avail">Ù„Ø§</span></div></div><button onclick="checkUpdates()" class="mt-4 px-4 py-2 btn-primary rounded-lg">ğŸ” ÙØ­Øµ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª</button></div>
            <div class="card p-6"><h3 class="font-bold mb-4">ğŸ’Š Self-Healing</h3><div class="space-y-2"><div class="flex justify-between"><span>Ø§Ù„Ø­Ø§Ù„Ø©</span><span id="health-status" class="text-green-400 font-bold">Healthy</span></div><div class="flex justify-between"><span>Ø§Ù„Ø£Ø®Ø·Ø§Ø¡</span><span id="error-count">0</span></div><div class="flex justify-between"><span>Ø§Ù„ØªØ¹Ø§ÙÙŠØ§Øª</span><span id="recovery-count">0</span></div></div><button onclick="runHealthCheck()" class="mt-4 px-4 py-2 bg-blue-600 rounded-lg">ğŸƒ ÙØ­Øµ Ø§Ù„ØµØ­Ø©</button></div>
        </div>
        <div class="card p-6 mb-6"><h3 class="font-bold mb-4">ğŸ“Š Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù†Ø¸Ø§Ù…</h3><div class="grid grid-cols-2 md:grid-cols-4 gap-4"><div class="text-center"><div class="text-2xl font-bold text-cyan-400" id="cpu-percent">-</div><div class="text-xs text-gray-500">CPU</div></div><div class="text-center"><div class="text-2xl font-bold text-green-400" id="mem-percent">-</div><div class="text-xs text-gray-500">Ø§Ù„Ø°Ø§ÙƒØ±Ø©</div></div><div class="text-center"><div class="text-2xl font-bold text-yellow-400" id="disk-percent">-</div><div class="text-xs text-gray-500">Ø§Ù„Ù‚Ø±Øµ</div></div><div class="text-center"><div class="text-2xl font-bold text-purple-400" id="uptime">-</div><div class="text-xs text-gray-500">Uptime</div></div></div></div>
        <div class="card p-6"><h3 class="font-bold mb-4">âœ¨ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù†ÙˆÙˆÙŠØ©</h3><div class="grid grid-cols-2 md:grid-cols-3 gap-3"><div class="flex items-center gap-2"><span class="text-green-400">âœ…</span><span>ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ</span></div><div class="flex items-center gap-2"><span class="text-green-400">âœ…</span><span>ØªØ¹Ø§ÙÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…Ù† Ø§Ù„Ø£Ø®Ø·Ø§Ø¡</span></div><div class="flex items-center gap-2"><span class="text-green-400">âœ…</span><span>Ù…Ø±Ø§Ù‚Ø¨Ø© 24/7</span></div><div class="flex items-center gap-2"><span class="text-green-400">âœ…</span><span>Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠ</span></div><div class="flex items-center gap-2"><span class="text-green-400">âœ…</span><span>Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡</span></div><div class="flex items-center gap-2"><span class="text-green-400">âœ…</span><span>Ø³Ø¬Ù„Ø§Øª Ø­ÙŠØ©</span></div></div></div>`;
    }
    
    async function checkUpdates() { const r = await api('/system/updates/check'); alert(r.ok ? (r.update_available ? 'ğŸ”„ ØªØ­Ø¯ÙŠØ« Ù…ØªØ§Ø­: v' + r.latest_version : 'âœ… Ø£Ù†Øª Ø¹Ù„Ù‰ Ø£Ø­Ø¯Ø« Ø¥ØµØ¯Ø§Ø±') : r.error); }
    async function runHealthCheck() { const r = await api('/system/health/check'); alert('âœ… ÙØ­Øµ Ø§Ù„ØµØ­Ø©: ' + r.status); }
    
    async function loadNuclearData() {
        try {
            const [nuclear, metrics] = await Promise.all([api('/system/nuclear'), api('/system/metrics')]);
            if (nuclear.systems) {
                $('uptime').textContent = Math.floor(nuclear.uptime) + 's';
            }
            if (metrics.system) {
                $('cpu-percent').textContent = metrics.system.cpu?.percent?.toFixed(1) + '%';
                $('mem-percent').textContent = metrics.system.memory?.percent?.toFixed(1) + '%';
                $('disk-percent').textContent = metrics.system.disk?.percent?.toFixed(1) + '%';
            }
        } catch(e) {}
    }
    setInterval(loadNuclearData, 5000);
    loadNuclearData();
    
    loadState();
    </script>
</body>
</html>